<!DOCTYPE html>
<html>

<head>
	<title>Four in a Row (WebAssembly)</title>
</head>

<body>
	<textarea id="output" rows="30" cols="80"></textarea>
	<br>
	<input type="text" id="input" placeholder="Enter your move...">
	<button onclick="submitInput()">Submit</button>

	<script>
		let inputBuffer = "";

		Module = {
			preRun: [],
			postRun: [],
			print: function (text) {
				document.getElementById('output').value += text + '\n';
				document.getElementById('output').scrollTop = document.getElementById('output').scrollHeight;
			},
			printErr: function (text) {
				console.error(text);
			},
			stdin: function () {
				if (inputBuffer.length > 0) {
					let code = inputBuffer.charCodeAt(0);
					inputBuffer = inputBuffer.substring(1);
					return code;
				}
				return null;
			},
			setStatus: function (text) {
				console.log(text);
			}
		};

		function submitInput() {
			let input = document.getElementById('input').value + '\n';
			inputBuffer += input;
			document.getElementById('input').value = '';
		}

		// Load the WebAssembly module
		var script = document.createElement('script');
		script.src = 'four_in_a_row.js';
		document.head.appendChild(script);
	</script>
</body>

</html>